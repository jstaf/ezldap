#!/usr/bin/env python3

import argparse
import ezldap

def main():
    parser = argparse.ArgumentParser(description="Change a user's home directory.")
    parser.add_argument('username', nargs=1, type=str, 
            help='User to change homeDirectory for.')
    parser.add_argument('shell', nargs=1, type=str,
            help='New home shell.')
    argv = parser.parse_args()
    
    user = argv.username[0]
    shell = argv.shell[0].encode()

    with ezldap.auto_bind() as con:
        dn = con.get_user(user)[0][0]
        con.modify_replace(dn, 'loginShell', shell)

    
if __name__ == '__main__':
    main()

