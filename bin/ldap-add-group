#!/usr/bin/env python3

import argparse
import ezldap

def main():
    parser = argparse.ArgumentParser(description="Creates an LDAP group.")
    parser.add_argument('groupname', nargs=1, type=str, 
            help='LDAP group name to create.')
    parser.add_argument('gid', nargs='?', type=str, default=None,
            help='GID number of group to create. If not supplied, uses next available GID number.')
    argv = parser.parse_args()
    gid = argv.gid

    with ezldap.auto_bind() as con:
        if gid is None:
            gid = con.next_gidn()

        con.add_group(argv.groupname[0], gid=gid)

if __name__ == '__main__':
    main()
